<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>

<input type="text" id="tokenInput" placeholder="JWT Access Token">
<button onclick="connect()">ì—°ê²°</button>

<script>
    let stompClient = null;

    function connect() {
        const token = document.getElementById("tokenInput").value.trim();

        if (!token) {
            alert("tokenì„ ì…ë ¥í•˜ì„¸ìš”.");
            return;
        }

        const socket = new WebSocket("ws://localhost:8080/portfolio"); // ğŸ”¥ SockJS ì œê±°
        stompClient = Stomp.over(socket);

        stompClient.connect(
            {
                token: token  // âœ… STOMP CONNECT í—¤ë”ë¡œ JWT ì „ë‹¬
            },
            function () {
                console.log("âœ… ì—°ê²° ì„±ê³µ");
            },
            function (err) {
                console.error("âŒ ì—°ê²° ì‹¤íŒ¨", err);
            }
        );
    }
</script>

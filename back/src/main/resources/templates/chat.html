<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>

<input type="text" id="tokenInput" placeholder="JWT Access Token">
<button onclick="connect()">연결</button>

<script>
    let stompClient = null;

    function connect() {
        const token = document.getElementById("tokenInput").value.trim();

        if (!token) {
            alert("token을 입력하세요.");
            return;
        }

        const socket = new WebSocket("ws://localhost:8080/portfolio"); // 🔥 SockJS 제거
        stompClient = Stomp.over(socket);

        stompClient.connect(
            {
                token: token  // ✅ STOMP CONNECT 헤더로 JWT 전달
            },
            function () {
                console.log("✅ 연결 성공");
            },
            function (err) {
                console.error("❌ 연결 실패", err);
            }
        );
    }
</script>
